#!/bin/bash

echo "ğŸ” Production Access Debug Checker"
echo "=================================="
echo ""

# Check if server is running
if pgrep -f "next dev" > /dev/null; then
    echo "âœ… Development server is running"
else
    echo "âŒ Development server is NOT running"
    echo "   Run: npm run dev"
    exit 1
fi

echo ""
echo "ğŸ“‹ Quick Checklist:"
echo ""
echo "1ï¸âƒ£  Server restarted after middleware changes?"
echo "   - Stop server: Ctrl+C"
echo "   - Start server: npm run dev"
echo ""
echo "2ï¸âƒ£  Browser cache cleared?"
echo "   - Mac: Cmd+Shift+R"
echo "   - Windows: Ctrl+Shift+R"
echo ""
echo "3ï¸âƒ£  Logged in with correct account?"
echo "   - Email: admin@sppg-purwakarta.com"
echo "   - Password: password123"
echo ""
echo "4ï¸âƒ£  When you click Production link, check terminal for:"
echo "   - Look for lines starting with [Middleware]"
echo "   - Should see ğŸš€ REQUEST START"
echo "   - Should see ğŸ­ PRODUCTION ACCESS CHECK"
echo ""
echo "=================================="
echo ""
echo "ğŸ¯ WHAT TO COPY FROM TERMINAL:"
echo ""
echo "Copy ALL lines between the === separators:"
echo ""
echo "================================================================================"
echo "[Middleware] ğŸš€ REQUEST START: ..."
echo "[Middleware] ğŸ“‹ Route Classification: ..."
echo "[Middleware] ğŸ” Session Check: ..."
echo "[Middleware] ğŸ¢ SPPG Route Check: ..."
echo "[Middleware] ğŸ‘¤ SPPG User Validation: ..."
echo "[Middleware] ğŸ­ PRODUCTION ACCESS CHECK: ..."
echo "[Middleware] âœ…âœ…âœ… Production access GRANTED"
echo "  OR"
echo "[Middleware] âŒâŒâŒ FAILED: Production access DENIED"
echo "================================================================================"
echo ""
echo "Then paste those logs in your next message!"
echo ""
